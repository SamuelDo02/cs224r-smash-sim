import numpy as np
from numpy.typing import DTypeLike

# Define a mapping of column names to NumPy data types.
NP_TYPE_BY_COLUMN: dict[str, DTypeLike] = {
    "replay_uuid": np.int32,
    "frame": np.int32,
    "stage": np.int32,
    # Player 1
    "p1_port": np.int32,
    "p1_character": np.int32,
    "p1_position_x": np.float32,
    "p1_position_y": np.float32,
    "p1_percent": np.float32,
    "p1_shield_strength": np.float32,
    "p1_stock": np.int32,
    "p1_facing": np.int32,
    "p1_action": np.int32,
    "p1_action_frame": np.int32,
    "p1_invulnerable": np.int32,
    "p1_invulnerability_left": np.int32,
    "p1_hitlag_left": np.int32,
    "p1_hitstun_left": np.int32,
    "p1_jumps_left": np.int32,
    "p1_on_ground": np.int32,
    "p1_speed_air_x_self": np.float32,
    "p1_speed_y_self": np.float32,
    "p1_speed_x_attack": np.float32,
    "p1_speed_y_attack": np.float32,
    "p1_speed_ground_x_self": np.float32,
    "p1_ecb_bottom_x": np.float32,
    "p1_ecb_bottom_y": np.float32,
    "p1_ecb_top_x": np.float32,
    "p1_ecb_top_y": np.float32,
    "p1_ecb_left_x": np.float32,
    "p1_ecb_left_y": np.float32,
    "p1_ecb_right_x": np.float32,
    "p1_ecb_right_y": np.float32,
    # Player 2
    "p2_port": np.int32,
    "p2_character": np.int32,
    "p2_position_x": np.float32,
    "p2_position_y": np.float32,
    "p2_percent": np.float32,
    "p2_shield_strength": np.float32,
    "p2_stock": np.int32,
    "p2_facing": np.int32,
    "p2_action": np.int32,
    "p2_action_frame": np.int32,
    "p2_invulnerable": np.int32,
    "p2_invulnerability_left": np.int32,
    "p2_hitlag_left": np.int32,
    "p2_hitstun_left": np.int32,
    "p2_jumps_left": np.int32,
    "p2_on_ground": np.int32,
    "p2_speed_air_x_self": np.float32,
    "p2_speed_y_self": np.float32,
    "p2_speed_x_attack": np.float32,
    "p2_speed_y_attack": np.float32,
    "p2_speed_ground_x_self": np.float32,
    "p2_ecb_bottom_x": np.float32,
    "p2_ecb_bottom_y": np.float32,
    "p2_ecb_top_x": np.float32,
    "p2_ecb_top_y": np.float32,
    "p2_ecb_left_x": np.float32,
    "p2_ecb_left_y": np.float32,
    "p2_ecb_right_x": np.float32,
    "p2_ecb_right_y": np.float32,
    # Player 1 controller
    "p1_button_a": np.int32,
    "p1_button_b": np.int32,
    "p1_button_x": np.int32,
    "p1_button_y": np.int32,
    "p1_button_z": np.int32,
    "p1_button_start": np.int32,
    "p1_button_d_up": np.int32,
    "p1_button_l": np.int32,
    "p1_button_r": np.int32,
    "p1_main_stick_x": np.float32,
    "p1_main_stick_y": np.float32,
    "p1_c_stick_x": np.float32,
    "p1_c_stick_y": np.float32,
    "p1_l_shoulder": np.float32,
    "p1_r_shoulder": np.float32,
    # Player 2 controller
    "p2_button_a": np.int32,
    "p2_button_b": np.int32,
    "p2_button_x": np.int32,
    "p2_button_y": np.int32,
    "p2_button_z": np.int32,
    "p2_button_start": np.int32,
    "p2_button_d_up": np.int32,
    "p2_button_l": np.int32,
    "p2_button_r": np.int32,
    "p2_main_stick_x": np.float32,
    "p2_main_stick_y": np.float32,
    "p2_c_stick_x": np.float32,
    "p2_c_stick_y": np.float32,
    "p2_l_shoulder": np.float32,
    "p2_r_shoulder": np.float32,
    # Player 1 Nana
    "p1_nana_character": np.int32,
    "p1_nana_position_x": np.float32,
    "p1_nana_position_y": np.float32,
    "p1_nana_percent": np.float32,
    "p1_nana_shield_strength": np.float32,
    "p1_nana_stock": np.int32,
    "p1_nana_facing": np.int32,
    "p1_nana_action": np.int32,
    "p1_nana_action_frame": np.int32,
    "p1_nana_invulnerable": np.int32,
    "p1_nana_invulnerability_left": np.int32,
    "p1_nana_hitlag_left": np.int32,
    "p1_nana_hitstun_left": np.int32,
    "p1_nana_jumps_left": np.int32,
    "p1_nana_on_ground": np.int32,
    "p1_nana_speed_air_x_self": np.float32,
    "p1_nana_speed_y_self": np.float32,
    "p1_nana_speed_x_attack": np.float32,
    "p1_nana_speed_y_attack": np.float32,
    "p1_nana_speed_ground_x_self": np.float32,
    "p1_nana_ecb_bottom_x": np.float32,
    "p1_nana_ecb_bottom_y": np.float32,
    "p1_nana_ecb_top_x": np.float32,
    "p1_nana_ecb_top_y": np.float32,
    "p1_nana_ecb_left_x": np.float32,
    "p1_nana_ecb_left_y": np.float32,
    "p1_nana_ecb_right_x": np.float32,
    "p1_nana_ecb_right_y": np.float32,
    # Player 2 Nana
    "p2_nana_character": np.int32,
    "p2_nana_position_x": np.float32,
    "p2_nana_position_y": np.float32,
    "p2_nana_percent": np.float32,
    "p2_nana_shield_strength": np.float32,
    "p2_nana_stock": np.int32,
    "p2_nana_facing": np.int32,
    "p2_nana_action": np.int32,
    "p2_nana_action_frame": np.int32,
    "p2_nana_invulnerable": np.int32,
    "p2_nana_invulnerability_left": np.int32,
    "p2_nana_hitlag_left": np.int32,
    "p2_nana_hitstun_left": np.int32,
    "p2_nana_jumps_left": np.int32,
    "p2_nana_on_ground": np.int32,
    "p2_nana_speed_air_x_self": np.float32,
    "p2_nana_speed_y_self": np.float32,
    "p2_nana_speed_x_attack": np.float32,
    "p2_nana_speed_y_attack": np.float32,
    "p2_nana_speed_ground_x_self": np.float32,
    "p2_nana_ecb_bottom_x": np.float32,
    "p2_nana_ecb_bottom_y": np.float32,
    "p2_nana_ecb_top_x": np.float32,
    "p2_nana_ecb_top_y": np.float32,
    "p2_nana_ecb_left_x": np.float32,
    "p2_nana_ecb_left_y": np.float32,
    "p2_nana_ecb_right_x": np.float32,
    "p2_nana_ecb_right_y": np.float32,
}

# Create a mapping of column names to human-readable dtype strings.
MDS_DTYPE_STR_BY_COLUMN = {name: f"ndarray:{np.dtype(dtype).name}" for name, dtype in NP_TYPE_BY_COLUMN.items()}
